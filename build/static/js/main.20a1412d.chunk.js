(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,t,n){e.exports=n(44)},25:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(17),o=n.n(c),i=(n(25),n(2)),u=function(e){var t=e.filter,n=e.setFilter;return r.a.createElement("div",null,"filter show with ",r.a.createElement("input",{value:t,onChange:function(e){n(e.target.value)}}))},s=n(19),l=n(6),f=n.n(l),m=n(18),p=n(4),d=n.n(p),b="/api/persons",h=function(){return d.a.get(b).then((function(e){return e.data}))},E=function(e){return d.a.post(b,e).then((function(e){return e.data}))},v=function(e){return d.a.put("".concat(b,"/").concat(e.id),e).then((function(e){return e.data}))},g=function(e){return console.log(e),d.a.delete("".concat(b,"/").concat(e.id))},O=function(e){var t=e.contact,n=e.persons,a=e.setPersons,c=function(){var e=Object(m.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Delete ".concat(t.name))){e.next=5;break}return e.next=4,g(t);case 4:a(n.filter((function(e){return e.id!==t.id})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("li",null,t.name," ",t.number," ",r.a.createElement("button",{onClick:c},"Delete"))},j=function(e){var t=e.filter,n=e.persons,a=e.setPersons;return(t?n.filter((function(e){return e.name.toLowerCase().indexOf(t.toLowerCase())>-1})):Object(s.a)(n)).map((function(e){return r.a.createElement(O,{key:e.id,contact:e,persons:n,setPersons:a})}))},w=n(7),y=function(e){var t=e.setPersons,n=e.persons,c=e.setNotification,o=Object(a.useState)(""),u=Object(i.a)(o,2),s=u[0],l=u[1],f=Object(a.useState)(""),m=Object(i.a)(f,2),p=m[0],d=m[1];return r.a.createElement("form",null,r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:s,onChange:function(e){l(e.target.value)}})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:p,onChange:function(e){d(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",onClick:function(e){var a;if(e.preventDefault(),a=n.find((function(e){return e.name===s}))){if(!window.confirm("".concat(s," is already added to the phonebook, replace old number with new one?")))return;v(Object(w.a)(Object(w.a)({},a),{},{number:p})).then((function(e){l(""),d(""),c({type:0,message:"".concat(e.name," contact has been updated")}),t(n.map((function(t){return t.id!==e.id?t:e})))})).catch((function(e){c({type:1,message:"".concat(a.name," was not found on server")}),console.error(e)}))}else{var r={name:s,number:p};l(""),d(""),E(r).then((function(e){t(n.concat(e)),c({type:0,message:"".concat(e.name," contact has been added")})})).catch((function(e){c({type:1,message:e.response.data.error}),console.error(e)}))}}},"add")))},k=function(e){var t=e.notification,n=e.setNotification;return Object(a.useEffect)((function(){setTimeout((function(){n({type:0,message:""})}),3e3)}),[n]),0===t.type?r.a.createElement("div",{className:"notification"},t.message):r.a.createElement("div",{className:"error"},t.message)},C=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(""),s=Object(i.a)(o,2),l=s[0],f=s[1],m=Object(a.useState)({type:0,message:""}),p=Object(i.a)(m,2),d=p[0],b=p[1];return Object(a.useEffect)((function(){h().then((function(e){return c(e)}))}),[]),r.a.createElement("div",null,d.message&&r.a.createElement(k,{notification:d,setNotification:b}),r.a.createElement("h2",null,"Filter"),r.a.createElement(u,{filter:l,setFilter:f}),r.a.createElement("h2",null,"Phonebook"),r.a.createElement(y,{setPersons:c,persons:n,setNotification:b}),r.a.createElement("h2",null,"Numbers"),r.a.createElement("ul",null,r.a.createElement(j,{filter:l,persons:n,setPersons:c})))};o.a.render(r.a.createElement(C,null),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.20a1412d.chunk.js.map